/***************************************************************************\
* Copyright (c) 2023, Sofie Martins                                         *   
* All rights reserved.                                                      * 
\***************************************************************************/

#include "Utils/generics.h"

#if !defined _FIELD_TYPE
#error Missing _FIELD_TYPE in spinor_field.c
#endif
#if !defined _FIELD_DIM
#error Missing _FIELD_DIM in spinor_field.c
#endif

#define _DECLARE(_name, _args) _FUNC(_FIELD_TYPE, _name, _FIELD_TYPE, _args)

_DECLARE(get_even_part_, (_FIELD_TYPE * f)) {
    _FIELD_TYPE even_field;
    even_field = *f;
    even_field.type = &glat_even;
    return even_field;
}

_DECLARE(get_odd_part_, (_FIELD_TYPE * f)) {
    _FIELD_TYPE odd_field;
    odd_field = *f;
    odd_field.type = &glat_odd;
    odd_field.ptr = odd_field.ptr + _FIELD_DIM * glat_odd.master_shift;
#ifdef WITH_GPU
    odd_field.gpu_ptr = odd_field.gpu_ptr + _FIELD_DIM * glat_odd.master_shift;
#endif
    return odd_field;
}

#undef _FIELD_TYPE
#undef _FIELD_DIM