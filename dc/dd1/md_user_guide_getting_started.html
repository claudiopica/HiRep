<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HiRep: Getting Started</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init();
    DoxygenAwesomeInteractiveToc.init();
</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<!-- <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/SVG"],
});
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "all" } },
  "HTML-CSS": { linebreaks: { automatic: true } },
  SVG: { linebreaks: { automatic: true } }
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
 -->
<script>
  window.MathJax = {
    tex: {
      tags: "all",
      packages: ['base', 'ams']
    },
    options: {
      ignoreHtmlClass: 'tex2jax_ignore',
      processHtmlClass: 'tex2jax_process',
      lazyMargin: '1200px',
    },
    loader: {load: ['ui/lazy']}
  };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
<!-- $darkmode -->
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
  <!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/claudiopica/HiRep" class="github-corner" title="View project on GitHub" target="_blank">
  <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
  <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HiRep<span id="projectnumber">&#160;0.1</span>
   </div>
   <!-- BEGIN PROJECT_BRIEF<div id="projectbrief">HiRep</div>END PROJECT_BRIEF -->
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/dd1/md_user_guide_getting_started.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Getting Started </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md21">Quick start</a></li>
<li class="level1"><a href="#autotoc_md22">Dependencies</a></li>
<li class="level1"><a href="#autotoc_md23">Compilation</a><ul><li class="level2"><a href="#autotoc_md24">Clone the directory</a></li>
<li class="level2"><a href="#autotoc_md25">Adjust compilation options</a></li>
<li class="level2"><a href="#autotoc_md26">Compile the code</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md27">Run</a><ul><li class="level2"><a href="#autotoc_md28">Adjust input file</a></li>
<li class="level2"><a href="#autotoc_md29">Execute Binary</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="get_started"></a></p>
<h1><a class="anchor" id="autotoc_md21"></a>
Quick start</h1>
<p > 
<a href="https://asciinema.org/a/550942"><img src="https://asciinema.org/a/550942.svg" alt="asciicast" class="inline"></a>
</p>
<h1><a class="anchor" id="autotoc_md22"></a>
Dependencies</h1>
<ul>
<li>A C99 compiler (GCC, clang, icc). OpenMP can be used if supported by the compiler. <br  />
</li>
<li>If MPI is needed, an MPI implementation, i.e. OpenMPI or MPICH for MPI support. Use a CUDA-aware MPI implementation for multi-GPU support.</li>
<li>If GPU acceleration if needed, CUDA 11.x and nvcc compiler to make use of CUDA GPU acceleration.</li>
<li>Perl 5.x for compilation.</li>
<li><a href="https://ninja-build.org/">ninja build</a> for compilation.</li>
</ul>
<h1><a class="anchor" id="autotoc_md23"></a>
Compilation</h1>
<h2><a class="anchor" id="autotoc_md24"></a>
Clone the directory</h2>
<div class="fragment"><div class="line">git clone https://github.com/claudiopica/HiRep</div>
</div><!-- fragment --><p >Make sure the build command <code>Make/nj</code> and <code>ninja</code> are in your <code>PATH</code>.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
Adjust compilation options</h2>
<p >Adjust the file <code>Make/MkFlags</code> to set the desired options. The option file can be generated by using the <code>Make/Utils/write_mkflags.pl</code> tools. Use: </p><div class="fragment"><div class="line">write_mkflags.pl -h</div>
</div><!-- fragment --><p> for a list of available options. The most important ones include:</p>
<ul>
<li>Number of colors (NG) <div class="fragment"><div class="line">NG=3</div>
</div><!-- fragment --></li>
<li>Gauge group SU(NG) or SO(NG) <div class="fragment"><div class="line">GAUGE_GROUP = GAUGE_SUN</div>
<div class="line">#GAUGE_GROUP = GAUGE_SON</div>
</div><!-- fragment --></li>
<li>Representation of fermion fields <div class="fragment"><div class="line">REPR = REPR_FUNDAMENTAL</div>
<div class="line">#REPR = REPR_SYMMETRIC</div>
<div class="line">#REPR = REPR_ANTISYMMETRIC</div>
<div class="line">#REPR = REPR_ADJOINT</div>
</div><!-- fragment --></li>
<li>Lattice boundary Conditions</li>
</ul>
<p >Comment out the line here, when you want to establish certain boundary conditions into the respective direction. </p><div class="fragment"><div class="line">#Available choices of boundary conditions:</div>
<div class="line">#T =&gt; PERIODIC, ANTIPERIODIC, OPEN, THETA</div>
<div class="line">#X =&gt; PERIODIC, ANTIPERIODIC, THETA</div>
<div class="line">#Y =&gt; PERIODIC, ANTIPERIODIC, THETA</div>
<div class="line">#Z =&gt; PERIODIC, ANTIPERIODIC, THETA</div>
<div class="line">MACRO += -DBC_T_ANTIPERIODIC</div>
<div class="line">MACRO += -DBC_X_PERIODIC</div>
<div class="line">MACRO += -DBC_Y_PERIODIC</div>
<div class="line">MACRO += -DBC_Z_PERIODIC</div>
</div><!-- fragment --><ul>
<li>MACRO options</li>
</ul>
<p >You can select a number of features via the <code>MACRO</code> variable. The most important ones are:</p>
<p >Specify, whether you want to compile with MPI by using</p>
<div class="fragment"><div class="line">#MACRO += -DWITH_MPI</div>
</div><!-- fragment --><p >For compilation with GPU acceleration for CUDA GPUs use:</p>
<div class="fragment"><div class="line">MACRO += -DWITH_GPU</div>
</div><!-- fragment --><ul>
<li>Compiler options</li>
</ul>
<p >You can set your choice of C, C++, MPI and CUDA compiler and their options by using the variables: </p><div class="fragment"><div class="line">CC = gcc</div>
<div class="line">MPICC = mpicc</div>
<div class="line">NVCC = nvcc</div>
<div class="line">CXX = g++</div>
<div class="line">LDFLAGS = -Wall -O3</div>
<div class="line">GPUFLAGS = -arch=sm_80 </div>
<div class="line">INCLUDE = </div>
</div><!-- fragment --><p >For example, to use the Intel compiler and Intel's MPI implementation, and no CUDA, one could use:</p>
<div class="fragment"><div class="line">CC = icc</div>
<div class="line">MPICC = mpiicc</div>
<div class="line">LDFLAGS = -O3</div>
<div class="line">INCLUDE = </div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md26"></a>
Compile the code</h2>
<p >From the root folder just type: </p><div class="fragment"><div class="line">nj</div>
</div><!-- fragment --><p> (this is a tool in the <code>Make/</code> folder: make sure it is in your path!) The above will compile the <code>libhr.a</code> library and all the available executable in the HiRep distribution, including executable for dnamical fermions <code>hmc</code> and pure gauge <code>suN</code> simulations and all the applicable tests. If you wish to compile only one of the executable, e.g. <code>suN</code>, just change to the corresponding directory, e.g. <code>PureGauge</code>, and execute the <code>nj</code> command from there.</p>
<p >All build artefacts, except the final executables, are located in the <code>build</code> folder at the root directory of the distribution.</p>
<h1><a class="anchor" id="autotoc_md27"></a>
Run</h1>
<h2><a class="anchor" id="autotoc_md28"></a>
Adjust input file</h2>
<p >As example we will use the <code>hmc</code> program which can be found in the <code>HMC</code> directory (to create the executable type <code>nj</code> in that directory). The <code>hmc</code> program will run the generation of lattice configurations with dynamical fermions by using a hybrid Monte Carlo algorithm. The program uses a number of parameters which needs to be specified in an input file, see <code>HMC/input_file</code> for an example. Input parameters are divided in different sections, such as: global lattice size, number of MPI processes per direction, random number generator, run control variables, definition of the lattice action to use for the run, etc. For example, for basic run control variables, one can have a look at the section <code>Run control variables</code>.</p>
<div class="fragment"><div class="line">run name = run1</div>
<div class="line">save freq = 1</div>
<div class="line">meas freq = 1</div>
<div class="line">conf dir = cnfg</div>
<div class="line">gauge start = random </div>
<div class="line">last conf = +1</div>
</div><!-- fragment --><p >The "+" in front of <code>last conf</code> specifies the number of additional trajectories to be generated after the chosen startup configuration. I.e. if the startup configuration is trajectory number 5 and <code>last conf = 6</code> then one additional trajectory will be generated, while if <code>last conf = +6</code> then six additional trajectories will be generated (i.e. the last configuration generated will be number 11).</p>
<h2><a class="anchor" id="autotoc_md29"></a>
Execute Binary</h2>
<p >When not using MPI, simply run:</p>
<div class="fragment"><div class="line">$ ./hmc -i input_file</div>
</div><!-- fragment --><p >where <code>hmc</code> is the binary generated from <code>hmc.c</code>. If you are using openmp, remeber to set <code>OMP_NUM_THREADS</code> and other relevant environment variables to the desired value.</p>
<p >For the MPI version, run</p>
<div class="fragment"><div class="line">$ mpirun -np &lt;number of MPI processes&gt; ./hmc -i input_file</div>
</div><!-- fragment --><p >The GPU version of the code uses 1 GPU per MPI process.</p>
<p >The output file is written only by the MPI process rank 0, by default in a file called <code>out_0</code> in the current directory. A different name for the output file can be set by using the <code>-o</code> option.</p>
<p >For debug purposes it is sometimes useful to have output files from all MPI processes. This can be enabled with the compilation option: <code>MACRO += -DLOG_ALLPIDS</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
